<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Browse | Sunny Sugar Art</title>
<style>
  :root{
    --ink:#1f1b14; --muted:#6b5f4a; --line:#efe5c9;
    --card:#fff; --shadow:0 8px 24px rgba(0,0,0,.06);
    --accent:#fbc02d;            /* 與 Hero「Shop Cookies」一致的黃色 */
    --accent-ink:#2a2100;
  }
  *{box-sizing:border-box}
  body{margin:0;font:16px/1.7 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;color:var(--ink);background:#fff}
  a{color:inherit;text-decoration:none}
  header{padding:18px 20px;border-bottom:1px solid var(--line)}
  header a{font-weight:900}
  .wrap{max-width:1200px;margin:0 auto;padding:24px}
  h1{margin:6px 0 12px;font-size:2rem}
  p.lead{margin:0 0 14px;color:#574f3e}
  .crumbs{font-size:.9rem;color:#6b5f4a}

  /* 卡片格線 */
  .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:22px;margin-top:10px}

  /* 卡片本體 */
  .card{
    background:var(--card);border:1px solid #f2ecd7;border-radius:12px;
    overflow:hidden;box-shadow:var(--shadow);display:flex;flex-direction:column;
  }

  /* 圖片：固定高度，不裁切，置中 */
  .card img{
    display:block;width:100%;height:280px;
    object-fit:contain;                      /* ✅ 不裁切 */
    background:#f7f4ee;                      /* 視覺畫布 */
    border-bottom:1px solid #f2ecd7;
  }

  .card .content{padding:14px 16px 16px;display:flex;flex-direction:column;gap:8px}
  .card h3{margin:0 0 4px;font-size:1.05rem;font-weight:900}
  .price{font-weight:800;margin-top:2px;color:#4b3a2b}
  .btn{
    align-self:flex-start;margin-top:8px;background:var(--accent);color:var(--accent-ink);
    padding:10px 14px;border-radius:999px;font-weight:900;text-decoration:none;
    border:1px solid #e6ad10; box-shadow:0 2px 0 #d79d07 inset;
  }

  /* 錯誤訊息 */
  .err{margin-top:18px;color:#b42318;background:#fff3f2;border:1px solid #ffd1cd;padding:10px 12px;border-radius:10px}
</style>
</head>
<body>
<header><a href="index.html">← Back to Home</a></header>

<div class="wrap">
  <div class="crumbs" id="crumbs"></div>
  <h1 id="title">Loading...</h1>
  <p class="lead" id="desc"></p>

  <div class="grid" id="list"></div>
  <div id="error" class="err" style="display:none"></div>
</div>

<script>
/* ---------- 類別資料 ---------- */
const DATA = {
  halloween:{
    title:"Halloween Cookies",
    description:"Moody, stylish cookies for October. Choose a design below.",
    items:[
      {id:"pumpkin-charm", name:"Pumpkin Charm",  price:"From A$ 84.90", img:"images/halloween-pumpkin-charm.jpg"},
      {id:"pumpkin-men",   name:"Pumpkin Men",    price:"From A$ 84.90", img:"images/halloween-pumpkin-men.jpg"},
      {id:"cauldron-cake", name:"Cauldron Cake",  price:"From A$ 84.90", img:"images/halloween-cauldron-cake.jpg"},
      {id:"drink-me",      name:"Drink Me Bottles", price:"From A$ 49.00", img:"images/halloween-drink-me.jpg"},
      {id:"ghostie-boo",   name:"Ghostie Boo",    price:"From A$ 84.90", img:"images/halloween-ghostie-boo.jpg"},
      {id:"witchy-skirt",  name:"Witchy Skirt",   price:"From A$ 84.90", img:"images/halloween-witchy-skirt.jpg"},
      {id:"witchy-brew",   name:"Witchy Brew",    price:"From A$ 84.90", img:"images/halloween-witchy-brew.jpg"},
      {id:"witchy-hat",    name:"Witchy Hat",     price:"From A$ 84.90", img:"images/halloween-witchy-hat.jpg"},
      {id:"spooky-cat",    name:"Spooky Cat",     price:"From A$ 84.90", img:"images/halloween-spooky-cat.jpg"},
      {id:"boo-candy",     name:"Boo Candy",      price:"From A$ 84.90", img:"images/halloween-boo-candy.jpg"}
    ]
  },

  christmas:{
    title:"Christmas Gift Box",
    description:"Elegant gifting options in luxe packaging. Choose your favourite design below.",
    items:[
      {id:"snowflake",     name:"Snowflake",       price:"From A$ 84.90", img:"images/christmas-snowflake.jpg"},
      {id:"happy-tree",    name:"Happy Tree",      price:"From A$ 84.90", img:"images/christmas-happy-tree.jpg"},
      {id:"gingerbread",   name:"Gingerbread Man", price:"From A$ 84.90", img:"images/christmas-gingerbread.jpg"},
      {id:"candy-cane",    name:"Candy Cane",      price:"From A$ 84.90", img:"images/christmas-candy-cane.jpg"},
      {id:"surprise-tree", name:"Surprise Tree",   price:"From A$ 84.90", img:"images/christmas-surprise-tree.jpg"},
      {id:"reindeer",      name:"Reindeer",        price:"From A$ 84.90", img:"images/christmas-reindeer.jpg"},
      {id:"snowman",       name:"Snowman",         price:"From A$ 84.90", img:"images/christmas-snowman.jpg"},
      {id:"santa-belt",    name:"Santa Belt",      price:"From A$ 84.90", img:"images/christmas-santa-belt.jpg"}
    ]
  }
};

/* ---------- 工具：讀 hash ---------- */
function qs(key, def=""){ const m=location.hash.match(new RegExp(key+"=([^&]+)")); return m?decodeURIComponent(m[1]):def; }

/* ---------- 渲染 ---------- */
const cat = qs("cat");
const crumbsEl = document.getElementById('crumbs');
const titleEl  = document.getElementById('title');
const descEl   = document.getElementById('desc');
const listEl   = document.getElementById('list');
const errEl    = document.getElementById('error');

try{
  if(!cat){ throw new Error('Missing "#cat=" in URL. Example: category.html#cat=christmas'); }
  const pack = DATA[cat];
  if(!pack){ throw new Error(`Category "${cat}" not found in DATA.`); }

  crumbsEl.textContent = `Shop Cookies › ${pack.title}`;
  titleEl.textContent  = pack.title;
  descEl.textContent   = pack.description || '';

  listEl.innerHTML = pack.items.map(it=>`
    <article class="card">
      <img src="${it.img}" alt="${it.name}" onerror="this.style.opacity=.15">
      <div class="content">
        <h3>${it.name}</h3>
        <div class="price">${it.price||''}</div>
        <a class="btn" href="product.html#cat=${encodeURIComponent(cat)}&item=${encodeURIComponent(it.id)}">Browse</a>
      </div>
    </article>
  `).join('');
}catch(e){
  titleEl.textContent = "Oops";
  descEl.textContent = "";
  errEl.style.display='block';
  errEl.textContent = e.message + "  (請確認 category.html 的 DATA 區塊是否貼好、逗號與括號是否齊全)";
  console.error(e);
}
</script>
</body>
</html>
